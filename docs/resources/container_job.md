---
page_title: "nexaa_container_job Resource - nexaa"
subcategory: ""
description: |-
  Container job resource representing a scheduled container job that will be deployed on nexaa.
---

# nexaa_container_job (Resource)

Container job resource representing a scheduled container job that will be deployed on nexaa.

## Example Usage

```terraform
terraform {
  required_version = ">= 1.0"
  required_providers {
    nexaa = {
      source = "nexaa-cloud/nexaa"
    }
  }
}

provider "nexaa" {
  username = var.nexaa_username
  password = var.nexaa_password
}

variable "nexaa_username" {
  description = "Username for Nexaa authentication"
  type        = string
  sensitive   = true
}

variable "nexaa_password" {
  description = "Password for Nexaa authentication"
  type        = string
  sensitive   = true
}

variable "namespace" {
  description = "Namespace name"
  type        = string
  sensitive   = true
}

variable "namespace_description" {
  description = "Namespace description"
  type        = string
  sensitive   = true
}

variable "container_job_name" {
  description = "Container Job name"
  type        = string
  sensitive   = true
}

resource "nexaa_namespace" "project" {
  name        = var.namespace
  description = var.namespace_description
}

resource "nexaa_registry" "registry" {
  namespace = nexaa_namespace.project.name
  name      = "example"
  source    = "registry.example.com"
  username  = "user"
  password  = "pass"
  verify    = true
}

resource "nexaa_volume" "volume" {
  namespace = nexaa_namespace.project.name
  name      = "volume-name"
  size      = 1
}

resource "nexaa_container_job" "containerjob" {
  name      = var.container_job_name
  namespace = nexaa_namespace.project.name
  image     = "registry.example.com/busybox:1.28"
  registry  = nexaa_registry.registry.name

  resources = {
    cpu = 0.25
    ram = 0.5
  }

  environment_variables = [
    {
      name   = "ENV"
      value  = "production"
      secret = false
    },
    {
      name   = "Variable"
      value  = "terraform"
      secret = false
    },
    {
      name   = "API_KEY"
      value  = "supersecret"
      secret = true
    }
  ]

  mounts = [
    {
      path   = "/storage/mount"
      volume = nexaa_volume.volume.name
    }
  ]

  schedule_cron_expression = "0 * * * *" # Every hour
  command                  = ["/bin/sh", "-c", "date; echo Hello World"]
}
```

### Variables file (variables.tfvars)
```terraform
nexaa_username = "your-nexaa-username"
nexaa_password = "your-nexaa-password"

namespace             = "project"
namespace_description = "This is a optional description for a namespace"

container_job_name = "container-job"
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `image` (String) The image used to run the container job
- `name` (String) Name of the container job
- `namespace` (String) Name of the namespace that the container job will belong to
- `resources` (String) The resources used for running the container job, this can be gotten via the nexaa_container_resources data source, with specifying the amount of cpu and memory
- `schedule` (String) Cron notation to schedule jobs. Format is equal to regular cron notation. For example, to run a job every day at 4am, use `0 4 * * *`. You can use https://crontab.guru/ to help you build your cron expressions.

### Optional

- `command` (List of String) Command to run. This is the command executed at the given schedule. When omitted, the default command of the image will be used.
- `enabled` (Boolean) Enable or disable the job. By disabling a job, it will not be executed, but the configuration is kept.
- `entrypoint` (List of String) Entrypoint of the container. This field will overwrite the default entrypoint of the image. When omitted, the default entrypoint of the image will be used.
- `environment_variables` (Attributes Set) Environment variables used in the container job; order is not significant and matched by name (see [below for nested schema](#nestedatt--environment_variables))
- `mounts` (Attributes List) Used to add persistent storage to your container job (see [below for nested schema](#nestedatt--mounts))
- `registry` (String) The registry used to access images that are saved in a private environment, leave empty to use a public registry
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) Unique identifier of the container, equal to the name
- `last_updated` (String) Timestamp of the last Terraform update of the container job
- `state` (String) The state of the container job

<a id="nestedatt--environment_variables"></a>
### Nested Schema for `environment_variables`

Required:

- `name` (String) The name used for the environment variable
- `value` (String) The value used for the environment variable

Optional:

- `secret` (Boolean) A boolean to represent if the environment variable is a secret or not


<a id="nestedatt--mounts"></a>
### Nested Schema for `mounts`

Required:

- `path` (String) The path to the location where the data will be saved
- `volume` (String) The name of the volume that is used for the mount


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

Import is supported using the following syntax:

```shell
terraform import nexaa_container_job.containerjob test
```

## More examples

### Basic Container Job

```terraform
provider "nexaa" {
  username = "your-nexaa-username"
  password = "your-nexaa-password"
}

resource "nexaa_namespace" "project" {
  name        = "project-name"
  description = "This is an optional description"
}

resource "nexaa_container_job" "containerjob" {
  name      = "container-job-name"
  namespace = nexaa_namespace.project.name
  image     = "busybox:1.28"

  resources = {
    cpu = 0.25
    ram = 0.5
  }

  schedule_cron_expression = "0 * * * *" # Every hour
}
```
