---
page_title: "nexaa_container Resource - Nexaa"
subcategory: ""
description: |-
  Container resource representing a container that will be deployed on nexaa.
---

# nexaa_container (Resource)

Container resource representing a container that will be deployed on nexaa.

## Example Usage

```terraform
resource "nexaa_container" "container" {
  name      = "tf-container"
  namespace = "terraform"
  image     = "nginx:latest"
  registry  = "gitlab"

  resources = {
    cpu = 0.25
    ram = 0.5
  }

  ports = ["8000:8000", "80:80"]

  environment_variables = [
    {
      name   = "ENV"
      value  = "production"
      secret = false
    },
    {
      name   = "Variable"
      value  = "terraform"
      secret = false
    },
    {
      name   = "API_KEY"
      value  = "supersecret"
      secret = true
    }
  ]

  ingresses = [
    {
      domain_name = null
      port        = 80
      tls         = true
      allow_list  = ["0.0.0.0/0"]
    }
  ]

  mounts = [
    {
      path   = "/storage/mount"
      volume = "storage"
    }
  ]

  health_check = {
    port = 80
    path = "/storage/health"
  }

  scaling = {
    type = "auto"

    #manual_input = 1
    auto_input = {
      minimal_replicas = 1
      maximal_replicas = 3

      triggers = [
        {
          type      = "CPU"
          threshold = 70
        },
        {
          type      = "MEMORY"
          threshold = 80
        }
      ]
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `image` (String) The image use to run the container
- `name` (String) Name of the container
- `namespace` (String) Name of the namespace that the container will belong to
- `resources` (String) The resources used for running the container, this can be gotten via the nexaa_container_resources data source, with specifying the amount of cpu and memory
- `scaling` (Attributes) Used to specify or automaticaly scale the amount of replicas running (see [below for nested schema](#nestedatt--scaling))

### Optional

- `environment_variables` (Attributes Set) Environment variables used in the container; order is not significant and matched by name (see [below for nested schema](#nestedatt--environment_variables))
- `health_check` (Attributes) (see [below for nested schema](#nestedatt--health_check))
- `ingresses` (Attributes List) Used to access the container from the internet (see [below for nested schema](#nestedatt--ingresses))
- `mounts` (Attributes List) Used to add persistent storage to your container (see [below for nested schema](#nestedatt--mounts))
- `ports` (List of String) The ports used to expose for traffic, format as from:to
- `registry` (String) The registry used to be able to acces images that are saved in a private environment, fill in null to use a public registry
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) Unique identifier of the container, equal to the name
- `last_updated` (String) Timestamp of the last Terraform update of the private registry
- `status` (String) The status of the container

<a id="nestedatt--scaling"></a>
### Nested Schema for `scaling`

Required:

- `type` (String) The type of scaling you want, auto or manual

Optional:

- `auto_input` (Attributes) The input for the autoscaling (see [below for nested schema](#nestedatt--scaling--auto_input))
- `manual_input` (Number) The input for manual scaling, equal to the amount of running replicas you want

<a id="nestedatt--scaling--auto_input"></a>
### Nested Schema for `scaling.auto_input`

Required:

- `maximal_replicas` (Number) The maximum amount of replicas you want to scale to
- `minimal_replicas` (Number) The minimal amount of replicas you want

Optional:

- `triggers` (Attributes List) Used as condition as to when the container needs to add a replica, you can have 2 triggers, one for each type (see [below for nested schema](#nestedatt--scaling--auto_input--triggers))

<a id="nestedatt--scaling--auto_input--triggers"></a>
### Nested Schema for `scaling.auto_input.triggers`

Required:

- `threshold` (Number) The amount percentage wise needed to add another replica
- `type` (String) The type of metric used for specifying what the triggers monitors, is either MEMORY or CPU




<a id="nestedatt--environment_variables"></a>
### Nested Schema for `environment_variables`

Required:

- `name` (String) The name used for the environment variable
- `value` (String) The value used for the environment variable, is required

Optional:

- `secret` (Boolean) A boolean to represent if the environment variable is a secret or not


<a id="nestedatt--health_check"></a>
### Nested Schema for `health_check`

Required:

- `path` (String)
- `port` (Number)


<a id="nestedatt--ingresses"></a>
### Nested Schema for `ingresses`

Required:

- `port` (Number) The port used for the ingress, must be one of the exposed ports
- `tls` (Boolean) Boolean representing if you want TLS enabled or not

Optional:

- `allow_list` (List of String) A list with the IP's that can access the ingress url, 0.0.0.0/0 to make it accessible for everyone
- `domain_name` (String) The domain used for the ingress, defaults to https://{tenant}-{namespaceName}-{containerName}.container.tilaa.cloud


<a id="nestedatt--mounts"></a>
### Nested Schema for `mounts`

Required:

- `path` (String) The path to the location where the data will be saved
- `volume` (String) The name of the volume that is used for the mount


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

Import is supported using the following syntax:

The [` + "`" + `terraform import` + "`" + ` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
#!/bin/bash
terraform import nexaa_container "namespace/container_name"
```